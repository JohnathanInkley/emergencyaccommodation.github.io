<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Newham Council: move our member out of Emergency Accommodation NOW!</title>
    <style>
        @font-face {
            font-family: "Trim Poster";
            font-display: swap;
            src: url("./TrimPosterRegular.otf") format("opentype");
        }
        @font-face {
            font-family: "Circular Std medium";
            font-display: swap;
            src: url("./CircularStd-Medium.otf") format("opentype");
        }

        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            background: linear-gradient(rgba(255, 255, 255, 0.85), rgba(255, 255, 255, 0.85)), url('https://pbs.twimg.com/media/FE-ZJDbXsAc9IPZ?format=jpg&name=large') no-repeat center center fixed;
            background-size: cover;
        }
        header {
            width: 100%;
            text-align: center;
            margin: 20px 0;
        }
        header img {
            max-width: 200px;
            height: auto;
        }
        main {
            max-width: 600px;
            margin: 20px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.9);
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        h1 {
            text-align: center;
            color: #333;
            font-family: 'Trim Poster', Arial, sans-serif;
        }
        p {
            font-family: 'Circular Std medium', Arial, sans-serif;
            font-size: 1em;
            line-height: 1.5;
            color: #666;
            text-align: center;
            margin-bottom: 20px;
        }
        form {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        input[type="text"] {
            padding: 10px;
            margin: 10px 0;
            width: 100%;
            max-width: 400px;
            font-size: 1em;
        }
        button {
            padding: 10px 20px;
            font-size: 1em;
            color: white;
            background-color: #4CAF50;
            border: none;
            cursor: pointer;
            margin-top: 10px;
        }
        button:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }
        button:hover:not(:disabled) {
            background-color: #45a049;
        }
    </style>
</head>
<body>
    <header>
        <img src="https://londonrentersunion.org/wp-content/uploads/2018/05/lru-logo-from-eps.png" alt="London Renters Union Logo">
    </header>
    <main>
        <h1>Newham Council: move our member out of Emergency Accommodation NOW!</h1>
        <p>
            Newham Council has kept our member in Emergency Accommodation for past the legal limit. 
            They need to take action and house our member properly NOW! Enter your name and this 
            tool will produce an email that will tell Newham Council to take action.
        </p>
        <form id="email-form">
            <label for="name" style="font-family: 'Circular Std medium', Arial, sans-serif;">Your Name:</label>
            <input type="text" id="name" placeholder="Enter your name" required style="font-family: 'Circular Std medium', Arial, sans-serif;">

            <input type="hidden" id="to-email" value="council@example.com">
            <input type="hidden" id="bcc-email" value="bcc@example.com">

            <button type="submit" id="submit-button" disabled style="font-family: 'Circular Std medium', Arial, sans-serif;">Send Email</button>
        </form>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const nameInput = document.getElementById('name');
            const submitButton = document.getElementById('submit-button');

            // Enable submit button when name is entered
            nameInput.addEventListener('input', () => {
                submitButton.disabled = !nameInput.value.trim();
            });

            // Handle form submission
            document.getElementById('email-form').addEventListener('submit', async (event) => {
                event.preventDefault();

                const name = nameInput.value.trim();
                const toEmail = document.getElementById('to-email').value.trim();
                const bccEmail = document.getElementById('bcc-email').value.trim();

                // Fetch email body from the local text file
                let emailBody = '';
                try {
                    const response = await fetch('email_body.txt');
                    emailBody = await response.text();
                } catch (error) {
                    alert('Error loading email body. Ensure email_body.txt is in the same directory.');
                    return;
                }

                // Append user's name to the email body
                emailBody += `\n\n${name}`;

                // Create mailto link
                const mailtoLink = `mailto:${encodeURIComponent(toEmail)}?` +
                    `bcc=${encodeURIComponent(bccEmail)}&` +
                    `subject=${encodeURIComponent('Newham Council: move our member out of Emergency Accommodation NOW!')}&` +
                    `body=${encodeURIComponent(emailBody)}`;

                // Open the mailto link
                window.location.href = mailtoLink;
            });
        });
    </script>
</body>
</html>
