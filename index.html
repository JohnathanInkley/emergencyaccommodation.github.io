<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Andrew Goodman: Rehouse Iris Now!</title>
    <style>
        @font-face {
            font-family: "Trim Poster";
            font-display: swap;
            src: url("./TrimPosterRegular.otf") format("opentype");
        }
        @font-face {
            font-family: "Circular Std medium";
            font-display: swap;
            src: url("./CircularStd-Medium.otf") format("opentype");
        }

        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            background: linear-gradient(rgba(255, 255, 255, 0.85), rgba(255, 255, 255, 0.85)), url('https://pbs.twimg.com/media/FE-ZJDbXsAc9IPZ?format=jpg&name=large') no-repeat center center fixed;
            background-size: cover;
        }
        header {
            width: 100%;
            text-align: center;
            margin: 20px 0;
        }
        header img {
            max-width: 200px;
            height: auto;
        }
        main {
            max-width: 600px;
            margin: 20px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.9);
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        h1 {
            text-align: center;
            color: #333;
            font-family: 'Trim Poster', Arial, sans-serif;
        }
        p {
            font-family: 'Circular Std medium', Arial, sans-serif;
            font-size: 1em;
            line-height: 1.5;
            color: #666;
            text-align: center;
            margin-bottom: 20px;
        }
        form {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        input[type="text"] {
            padding: 10px;
            margin: 10px 0;
            width: 100%;
            max-width: 400px;
            font-size: 1em;
        }
        button {
            padding: 10px 20px;
            font-size: 1em;
            color: white;
            background-color: #4CAF50;
            border: none;
            cursor: pointer;
            margin-top: 10px;
        }
        button:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }
        button:hover:not(:disabled) {
            background-color: #45a049;
        }
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <header>
        <img src="https://londonrentersunion.org/wp-content/uploads/2018/05/lru-logo-from-eps.png" alt="London Renters Union Logo">
    </header>
    <main>
        <h1>Andrew Goodman: Rehouse Iris Now!</h1>
        <p>
        	After a year long campaign by LRU, L&Q finally agreed to rehouse our member Iris from her inaccessible and overcrowded flat. 
			However, despite agreeing this unofficially three months ago over email, she is still waiting for an official letter. 
			Tell Andrew Goodman he has to do it now so that Iris and her daughter have peace of minder for Christmas!
	</p>
	<form id="email-form">            
            <input type="text" id="name" placeholder="Enter your name" required style="font-family: 'Circular Std medium', Arial, sans-serif;">
      
            <button type="submit" id="submit-button" disabled style="font-family: 'Circular Std medium', Arial, sans-serif;">Send Email</button>
        </form>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const nameInput = document.getElementById('name');
            const submitButton = document.getElementById('submit-button');

            // Enable submit button when name is entered
            nameInput.addEventListener('input', () => {
                submitButton.disabled = !nameInput.value.trim();
            });

            // Handle form submission
            document.getElementById('email-form').addEventListener('submit', async (event) => {
                event.preventDefault();

                const name = nameInput.value.trim();
                const toEmail = 'andrewgoodman@lqgroup.org.uk'; 
                const ccEmail = 'newham-leytonstone@londonrentersunion.org';
                let emailBody = '';

                try {
                    const response = await fetch('email_body.txt');
                    emailBody = await response.text();
                } catch (error) {
                    alert('Error loading email body. Ensure email_body.txt is in the same directory.');
                    return;
                }


                // Append user's name and address to the email body
                emailBody += `\n${name}`;

                // Create mailto link
                const mailtoLink = `mailto:${encodeURIComponent(toEmail)}?` +
                    `cc=${encodeURIComponent(ccEmail)}&` +
                    `subject=${encodeURIComponent('Send Iris her official rehousing letter NOW!')}&` +
                    `body=${encodeURIComponent(emailBody)}`;

                // Open the mailto link
                window.location.href = mailtoLink;
            });
        });
    </script>
</body>
</html>
